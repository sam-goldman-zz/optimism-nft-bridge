"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = __importDefault(require("path"));
const fs_1 = __importDefault(require("fs"));
const glob_1 = __importDefault(require("glob"));
const main = async () => {
    const contractArtifactsFolder = path_1.default.resolve(__dirname, `../artifacts/contracts`);
    const artifactPaths = glob_1.default
        .sync(`${contractArtifactsFolder}/**/*.json`)
        .filter((match) => {
        return !match.endsWith('.dbg.json');
    });
    const content = `
    /* eslint-disable @typescript-eslint/no-var-requires, no-empty */
    /*
    THIS FILE IS AUTOMATICALLY GENERATED.
    DO NOT EDIT.
    */

    ${artifactPaths
        .map((artifactPath) => {
        const artifact = require(artifactPath);
        const pattern = /\\/g;
        const relPath = path_1.default
            .relative(__dirname, artifactPath)
            .replace(pattern, '/');
        return `
        let ${artifact.contractName}
        try {
          ${artifact.contractName} = require('${relPath}')
        } catch {}
        `;
    })
        .join('\n')}

    export const getContractArtifact = (name: string): any => {
      return {
        ${artifactPaths
        .map((artifactPath) => {
        const artifact = require(artifactPath);
        return `${artifact.contractName}`;
    })
        .join(',\n')}
      }[name]
    }
    `;
    fs_1.default.writeFileSync(path_1.default.resolve(__dirname, `../src/contract-artifacts.ts`), content);
};
main();
//# sourceMappingURL=generate-artifacts.js.map